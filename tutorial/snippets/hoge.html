<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<br><!--<br>generated by Pygments <https://pygments.org/><br>Copyright 2006-2020 by the Pygments team.<br>Licensed under the BSD license, see LICENSE for details.<br>-->
<br>
<html><br>
<head><br>  <title>code</title><br>
    <meta http-equiv="content-type" content="text/html; charset=None">
    <br>
    <style type="text/css"><
    br > /*<br>generated by Pygments <https://pygments.org/><br>Copyright 2006-2020 by the Pygments team.<br>Licensed under the BSD license, see LICENSE for details.<br>*/ < br > pre {
        line-height: 125%;
        margin: 0;
    }

    <
    br > td.linenos pre {
        color: #586e75;
        background-color: #073642;
        padding: 0 5px 0 5px;
    }

    <
    br > span.linenos {
        color: #586e75;
        background-color: #073642;
        padding: 0 5px 0 5px;
    }

    <
    br > td.linenos pre.special {
        color: #000000;
        background-color: #ffffc0;
        padding: 0 5px 0 5px;
    }

    <
    br > span.linenos.special {
        color: #000000;
        background-color: #ffffc0;
        padding: 0 5px 0 5px;
    }

    <
    br > body .hll {
        background-color: #073642
    }

    <
    br > body {
        background: #002b36;
        color: #839496
    }

    <
    br > body .c {
        color: #586e75;
        font-style: italic
    }

    /* Comment */
    <
    br > body .err {
        color: #839496;
        background-color: #dc322f
    }

    /* Error */
    <
    br > body .esc {
        color: #839496
    }

    /* Escape */
    <
    br > body .g {
        color: #839496
    }

    /* Generic */
    <
    br > body .k {
        color: #859900
    }

    /* Keyword */
    <
    br > body .l {
        color: #839496
    }

    /* Literal */
    <
    br > body .n {
        color: #839496
    }

    /* Name */
    <
    br > body .o {
        color: #586e75
    }

    /* Operator */
    <
    br > body .x {
        color: #839496
    }

    /* Other */
    <
    br > body .p {
        color: #839496
    }

    /* Punctuation */
    <
    br > body .ch {
        color: #586e75;
        font-style: italic
    }

    /* Comment.Hashbang */
    <
    br > body .cm {
        color: #586e75;
        font-style: italic
    }

    /* Comment.Multiline */
    <
    br > body .cp {
        color: #d33682
    }

    /* Comment.Preproc */
    <
    br > body .cpf {
        color: #586e75
    }

    /* Comment.PreprocFile */
    <
    br > body .c1 {
        color: #586e75;
        font-style: italic
    }

    /* Comment.Single */
    <
    br > body .cs {
        color: #586e75;
        font-style: italic
    }

    /* Comment.Special */
    <
    br > body .gd {
        color: #dc322f
    }

    /* Generic.Deleted */
    <
    br > body .ge {
        color: #839496;
        font-style: italic
    }

    /* Generic.Emph */
    <
    br > body .gr {
        color: #dc322f
    }

    /* Generic.Error */
    <
    br > body .gh {
        color: #839496;
        font-weight: bold
    }

    /* Generic.Heading */
    <
    br > body .gi {
        color: #859900
    }

    /* Generic.Inserted */
    <
    br > body .go {
        color: #839496
    }

    /* Generic.Output */
    <
    br > body .gp {
        color: #839496
    }

    /* Generic.Prompt */
    <
    br > body .gs {
        color: #839496;
        font-weight: bold
    }

    /* Generic.Strong */
    <
    br > body .gu {
        color: #839496;
        text-decoration: underline
    }

    /* Generic.Subheading */
    <
    br > body .gt {
        color: #268bd2
    }

    /* Generic.Traceback */
    <
    br > body .kc {
        color: #2aa198
    }

    /* Keyword.Constant */
    <
    br > body .kd {
        color: #2aa198
    }

    /* Keyword.Declaration */
    <
    br > body .kn {
        color: #cb4b16
    }

    /* Keyword.Namespace */
    <
    br > body .kp {
        color: #859900
    }

    /* Keyword.Pseudo */
    <
    br > body .kr {
        color: #859900
    }

    /* Keyword.Reserved */
    <
    br > body .kt {
        color: #b58900
    }

    /* Keyword.Type */
    <
    br > body .ld {
        color: #839496
    }

    /* Literal.Date */
    <
    br > body .m {
        color: #2aa198
    }

    /* Literal.Number */
    <
    br > body .s {
        color: #2aa198
    }

    /* Literal.String */
    <
    br > body .na {
        color: #839496
    }

    /* Name.Attribute */
    <
    br > body .nb {
        color: #268bd2
    }

    /* Name.Builtin */
    <
    br > body .nc {
        color: #268bd2
    }

    /* Name.Class */
    <
    br > body .no {
        color: #268bd2
    }

    /* Name.Constant */
    <
    br > body .nd {
        color: #268bd2
    }

    /* Name.Decorator */
    <
    br > body .ni {
        color: #268bd2
    }

    /* Name.Entity */
    <
    br > body .ne {
        color: #268bd2
    }

    /* Name.Exception */
    <
    br > body .nf {
        color: #268bd2
    }

    /* Name.Function */
    <
    br > body .nl {
        color: #268bd2
    }

    /* Name.Label */
    <
    br > body .nn {
        color: #268bd2
    }

    /* Name.Namespace */
    <
    br > body .nx {
        color: #839496
    }

    /* Name.Other */
    <
    br > body .py {
        color: #839496
    }

    /* Name.Property */
    <
    br > body .nt {
        color: #268bd2
    }

    /* Name.Tag */
    <
    br > body .nv {
        color: #268bd2
    }

    /* Name.Variable */
    <
    br > body .ow {
        color: #859900
    }

    /* Operator.Word */
    <
    br > body .w {
        color: #839496
    }

    /* Text.Whitespace */
    <
    br > body .mb {
        color: #2aa198
    }

    /* Literal.Number.Bin */
    <
    br > body .mf {
        color: #2aa198
    }

    /* Literal.Number.Float */
    <
    br > body .mh {
        color: #2aa198
    }

    /* Literal.Number.Hex */
    <
    br > body .mi {
        color: #2aa198
    }

    /* Literal.Number.Integer */
    <
    br > body .mo {
        color: #2aa198
    }

    /* Literal.Number.Oct */
    <
    br > body .sa {
        color: #2aa198
    }

    /* Literal.String.Affix */
    <
    br > body .sb {
        color: #2aa198
    }

    /* Literal.String.Backtick */
    <
    br > body .sc {
        color: #2aa198
    }

    /* Literal.String.Char */
    <
    br > body .dl {
        color: #2aa198
    }

    /* Literal.String.Delimiter */
    <
    br > body .sd {
        color: #586e75
    }

    /* Literal.String.Doc */
    <
    br > body .s2 {
        color: #2aa198
    }

    /* Literal.String.Double */
    <
    br > body .se {
        color: #2aa198
    }

    /* Literal.String.Escape */
    <
    br > body .sh {
        color: #2aa198
    }

    /* Literal.String.Heredoc */
    <
    br > body .si {
        color: #2aa198
    }

    /* Literal.String.Interpol */
    <
    br > body .sx {
        color: #2aa198
    }

    /* Literal.String.Other */
    <
    br > body .sr {
        color: #cb4b16
    }

    /* Literal.String.Regex */
    <
    br > body .s1 {
        color: #2aa198
    }

    /* Literal.String.Single */
    <
    br > body .ss {
        color: #2aa198
    }

    /* Literal.String.Symbol */
    <
    br > body .bp {
        color: #268bd2
    }

    /* Name.Builtin.Pseudo */
    <
    br > body .fm {
        color: #268bd2
    }

    /* Name.Function.Magic */
    <
    br > body .vc {
        color: #268bd2
    }

    /* Name.Variable.Class */
    <
    br > body .vg {
        color: #268bd2
    }

    /* Name.Variable.Global */
    <
    br > body .vi {
        color: #268bd2
    }

    /* Name.Variable.Instance */
    <
    br > body .vm {
        color: #268bd2
    }

    /* Name.Variable.Magic */
    <
    br > body .il {
        color: #2aa198
    }

    /* Literal.Number.Integer.Long */
    <
    br > < br >  </style>
    <br></head>
<br>
<body><br>
<h2>code</h2><br><br>
<table class="highlighttable">
    <tr>
        <td class="linenos">
            <div class="linenodiv">
                <pre> 1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54</pre>
            </div>
        </td>
        <td class="code">
            <div class="highlight">
                <pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span
                        class="kn">import</span> <span class="n">User</span><br><span class="kn">from</span> <span
                        class="nn">rest_framework</span> <span class="kn">import</span> <span
                        class="n">generics</span><span class="p">,</span> <span class="n">renderers</span><br><span
                        class="kn">from</span> <span class="nn">rest_framework</span> <span
                        class="kn">import</span> <span class="n">permissions</span><br><span
                        class="kn">from</span> <span class="nn">rest_framework.decorators</span> <span
                        class="kn">import</span> <span class="n">api_view</span><br><span class="kn">from</span> <span
                        class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span><br><span
                        class="kn">from</span> <span class="nn">rest_framework.reverse</span> <span
                        class="kn">import</span> <span class="n">reverse</span><br><br><span
                        class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span
                        class="n">Snippet</span><br><span class="kn">from</span> <span
                        class="nn">.permissions</span> <span class="kn">import</span> <span
                        class="n">IsOwnerOrReadOnly</span><br><span class="kn">from</span> <span
                        class="nn">.serializers</span> <span class="kn">import</span> <span
                        class="n">SnippetSerializer</span><span class="p">,</span> <span class="n">UserSerializer</span><br><br><br><span
                        class="nd">@api_view</span><span class="p">([</span><span class="s1">&#39;GET&#39;</span><span
                        class="p">])</span><br><span class="k">def</span> <span class="nf">api_root</span><span
                        class="p">(</span><span class="n">request</span><span class="p">,</span> <span
                        class="nb">format</span><span class="o">=</span><span class="kc">None</span><span
                        class="p">):</span><br>    <span class="k">return</span> <span class="n">Response</span><span
                        class="p">({</span><br>        <span class="s1">&#39;users&#39;</span><span
                        class="p">:</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;user-list&#39;</span><span
                        class="p">,</span> <span class="n">request</span><span class="o">=</span><span
                        class="n">request</span><span class="p">,</span> <span class="nb">format</span><span
                        class="o">=</span><span class="nb">format</span><span class="p">),</span><br>        <span
                        class="s1">&#39;snippets&#39;</span><span class="p">:</span> <span class="n">reverse</span><span
                        class="p">(</span><span class="s1">&#39;snippet-list&#39;</span><span class="p">,</span> <span
                        class="n">request</span><span class="o">=</span><span class="n">request</span><span
                        class="p">,</span> <span class="nb">format</span><span class="o">=</span><span
                        class="nb">format</span><span class="p">),</span><br>    <span
                        class="p">})</span><br><br><br><span class="k">class</span> <span
                        class="nc">SnippetHighlight</span><span class="p">(</span><span class="n">generics</span><span
                        class="o">.</span><span class="n">GenericAPIView</span><span class="p">):</span><br>    <span
                        class="n">queryset</span> <span class="o">=</span> <span class="n">Snippet</span><span
                        class="o">.</span><span class="n">objects</span><span class="o">.</span><span
                        class="n">all</span><span class="p">()</span><br>    <span class="n">renderer_class</span> <span
                        class="o">=</span> <span class="p">[</span><span class="n">renderers</span><span
                        class="o">.</span><span class="n">StaticHTMLRenderer</span><span
                        class="p">]</span><br><br>    <span class="k">def</span> <span class="nf">get</span><span
                        class="p">(</span><span class="bp">self</span><span class="p">,</span> <span
                        class="n">request</span><span class="p">,</span> <span class="o">*</span><span
                        class="n">args</span><span class="p">,</span> <span class="o">**</span><span
                        class="n">kwargs</span><span class="p">):</span><br>        <span class="n">snippet</span> <span
                        class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span
                        class="p">()</span><br>        <span class="k">return</span> <span
                        class="n">Response</span><span class="p">(</span><span class="n">snippet</span><span
                        class="o">.</span><span class="n">highlighted</span><span class="p">)</span><br><br><span
                        class="k">class</span> <span class="nc">SnippetList</span><span class="p">(</span><span
                        class="n">generics</span><span class="o">.</span><span class="n">ListCreateAPIView</span><span
                        class="p">):</span><br>    <span class="n">queryset</span> <span class="o">=</span> <span
                        class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span
                        class="o">.</span><span class="n">all</span><span class="p">()</span><br>    <span class="n">serializer_class</span> <span
                        class="o">=</span> <span class="n">SnippetSerializer</span><br><br>    <span class="n">permission_classes</span> <span
                        class="o">=</span> <span class="p">[</span><span class="n">permissions</span><span
                        class="o">.</span><span class="n">IsAuthenticatedOrReadOnly</span><span
                        class="p">]</span><br><br>    <span class="k">def</span> <span
                        class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span
                        class="p">,</span> <span class="n">serializer</span><span class="p">):</span><br>        <span
                        class="n">serializer</span><span class="o">.</span><span class="n">save</span><span
                        class="p">(</span><span class="n">owner</span><span class="o">=</span><span
                        class="bp">self</span><span class="o">.</span><span class="n">request</span><span
                        class="o">.</span><span class="n">user</span><span class="p">)</span><br><br><br><span
                        class="k">class</span> <span class="nc">SnippetDetail</span><span class="p">(</span><span
                        class="n">generics</span><span class="o">.</span><span
                        class="n">RetrieveUpdateDestroyAPIView</span><span class="p">):</span><br>    <span class="n">queryset</span> <span
                        class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span
                        class="n">objects</span><span class="o">.</span><span class="n">all</span><span
                        class="p">()</span><br>    <span class="n">serializer_class</span> <span
                        class="o">=</span> <span class="n">SnippetSerializer</span><br><br>    <span class="n">permission_classes</span> <span
                        class="o">=</span> <span class="p">[</span><span class="n">permissions</span><span
                        class="o">.</span><span class="n">IsAuthenticatedOrReadOnly</span><span class="p">,</span><br>                          <span
                        class="n">IsOwnerOrReadOnly</span><span class="p">]</span><br><br><br><span
                        class="k">class</span> <span class="nc">UserList</span><span class="p">(</span><span class="n">generics</span><span
                        class="o">.</span><span class="n">ListAPIView</span><span class="p">):</span><br>    <span
                        class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span
                        class="o">.</span><span class="n">objects</span><span class="o">.</span><span
                        class="n">all</span><span class="p">()</span><br>    <span
                        class="n">serializer_class</span> <span class="o">=</span> <span class="n">UserSerializer</span><br><br><br><span
                        class="k">class</span> <span class="nc">UserDetail</span><span class="p">(</span><span
                        class="n">generics</span><span class="o">.</span><span class="n">RetrieveAPIView</span><span
                        class="p">):</span><br>    <span class="n">queryset</span> <span class="o">=</span> <span
                        class="n">User</span><span class="o">.</span><span class="n">objects</span><span
                        class="o">.</span><span class="n">all</span><span class="p">()</span><br>    <span class="n">serializer_class</span> <span
                        class="o">=</span> <span class="n">UserSerializer</span><br></pre>
            </div>
            <br></td>
    </tr>
</table>
</body>
<br></html><br>